<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN"><html>

<head>
  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0">  
  <script type="text/javascript">
    function onLoad() {
      if(window.flutterWebview != undefined) {
        flutterWebview.onmessage = function(event) {
  // prints "Got it!" when we receive the app's response.
          alert("onmessage:" + event.data);
}
      }
    }
    
    function test() {
      if(window.flutterWebview != undefined) {
        flutterWebview.postMessage("haha");
      }
    }
    
    function test2() {
      if(window.flutterWebview != undefined) {
        var imageUrl = "https://www.gtv.com.tw/Program/P1973010101/images/cast01.png";
        fetch(imageUrl)
  .then((response) => response.blob())
  .then((myBlob) => {
    flutterWebview.postMessage({feature:'blob', data:myBlob});    
  });
        flutterWebview.postMessage("haha");
      }      
    }
      
  </script>
</head>

<body onload="window.setTimeout(onLoad, 200)">
  <input type="button" value="test" onclick="test()" />  
  <br />
  <input type="button" value="test blob" onclick="test2()" />  
<hr>
</body>
</html>
